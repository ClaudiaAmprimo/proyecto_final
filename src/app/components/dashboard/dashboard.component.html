<div class="margen-navbar"></div>

<div class="profile-container">
  <div class="profile-card text-center">
    @if (userPhotoUrl){
      <img [src]="userPhotoUrl" alt="User Avatar" class="rounded-circle">
    } @else{
      <img [src]="userPhotoUrl" (error)="onImageError()" alt="User Avatar" class="rounded-circle">
    }
    <h3 class="mt-3">{{ userName }} {{userSurname}}</h3>
    <p class="mt-1">{{ userEmail }}</p>
    <button class="btn btn-primary mt-3" (click)="openEditModal()">Editar Perfil</button>
    <button class="btn btn-danger mt-3" (click)="onDeleteProfile()">Eliminar Perfil</button>
  </div>
</div>

@if(showModal){
  <div class="modal mt-5" [ngClass]="{'show': showModal}" tabindex="-1" role="dialog" style="display: block;">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Editar Perfil</h5>
          <button type="button" class="close" (click)="closeEditModal()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form [formGroup]="editForm" (ngSubmit)="onEditSubmit()">
            <!-- <div class="form-group">
              <label for="editEmail">Email</label>
              <input formControlName="email" type="email" class="form-control" id="editEmail" placeholder="Enter email" [disabled]="true">
            </div> -->
            <div class="form-group">
              <label for="editName">Name</label>
              <input formControlName="name" type="text" class="form-control" id="editName" placeholder="Enter your name">
            </div>
            <div class="form-group">
              <label for="editSurname">Surname</label>
              <input formControlName="surname" type="text" class="form-control" id="editSurname" placeholder="Enter your surname">
            </div>
            <div class="form-group">
              <label for="editPhoto">Foto de Perfil</label>
              <input type="file" class="form-control" id="editPhoto" (change)="onFileSelected($event)">
            </div>
            <button type="submit" class="btn btn-success" [disabled]="editForm.invalid">Guardar Cambios</button>
          </form>
        </div>
      </div>
    </div>
  </div>
}
